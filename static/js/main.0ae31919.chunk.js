(this["webpackJsonphud-test1-dev"]=this["webpackJsonphud-test1-dev"]||[]).push([[0],{107:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},121:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(17),s=n.n(o),l=(n(107),n(18)),c=n(92),i=n(57),u=(n(109),n(136)),d=n(122),p=n(93),b=(n(110),n(1)),h=function(e){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"ui three buttons",children:[Object(b.jsx)(d.a,{className:"ui "+(e.canCheck?"basic":"")+" blue button",onClick:e.onClickFold,children:"Fold"}),Object(b.jsx)(d.a,{className:"ui "+(e.canCheck?"olive":"green")+" button",onClick:e.canCheck?e.onClickCheck:e.onClickCall,children:e.canCheck?"Check":"Call"}),Object(b.jsx)(d.a,{className:"ui "+(e.canBet?"orange":"red")+" button",onClick:e.canBet?e.onClickBet:e.onClickRaise,children:e.canBet?"Bet":"Raise"})]}),Object(b.jsxs)("div",{className:e.canStraddle?"ui four buttons":"ui three buttons",children:[Object(b.jsx)(d.a,{className:"ui black button",onClick:e.onClickBack,children:"\u21a9\ufe0eBack"}),e.canCheck?Object(b.jsx)(d.a,{}):Object(b.jsx)(d.a,{className:"ui violet button",onClick:e.onClickShortAllin,children:"ShortAllin"}),Object(b.jsx)(d.a,{className:"ui purple button",onClick:e.canBet?e.onClickBetAllin:e.onClickRaiseAllin,children:e.canCheck?"AllIn":"RaiseAllIn"}),e.canStraddle?Object(b.jsx)(d.a,{className:"ui pink button",onClick:e.onClickStraddle,children:"Straddle"}):void 0]})]})},j=n(82),m=n(137),f=(n(117),["VPIP","PFR","3B","F3B","CB","FCB","WT","W$","BBD"]),g=[[],[],["SB","BB"],["BTN","SB","BB"],["BTN","SB","BB","UTG"],["BTN","SB","BB","UTG","CO"],["BTN","SB","BB","UTG","HJ","CO"],["BTN","SB","BB","UTG","LJ","HJ","CO"],["BTN","SB","BB","UTG","+1","LJ","HJ","CO"],["BTN","SB","BB","UTG","+1","+2","LJ","HJ","CO"]],y=n(90),v=(n(118),n(119),function(e){var t=Math.round(e.numerator/e.denominator*100);return Object(b.jsxs)(m.a.Cell,{className:"metric-cell",children:[Object(b.jsx)("div",{className:"metric-value",children:isNaN(t)?"-":t}),Object(b.jsxs)("div",{className:"metric-denominator",children:["(",e.denominator,")"]})]})}),B=function(e){return Object(b.jsxs)(m.a.Row,{className:e.player.status.folded?"center aligned active row":e.myTurn?"center aligned positive row":"center aligned row",children:[Object(b.jsxs)(m.a.Cell,{className:"table-first-cell"+("hero"===e.player.info.name?" table-first-cell-hero":""),children:[Object(b.jsx)("div",{children:e.id}),Object(b.jsx)("div",{className:"table-player-name",children:e.player.info.name})]}),"EMPTY"===e.player.status.position?Object(b.jsx)(m.a.Cell,{className:"table-second-cell",onClick:e.AddPlayer,children:Object(b.jsx)("i",{className:"user plus icon"})}):Object(b.jsx)(m.a.Cell,{className:"table-second-cell",onClick:e.MoveBtn,children:e.player.status.position}),"EMPTY"!==e.player.status.position&&e.erasable?Object(b.jsx)(m.a.Cell,{className:"table-third-cell",onClick:e.ErasePlayer,children:Object(b.jsx)("i",{className:"user times icon"})}):Object(b.jsx)(m.a.Cell,{className:"table-third-cell"}),f.map((function(t){var n;return"EMPTY"!==e.player.status.position?Object(b.jsx)(v,Object(y.a)({},null!==(n=e.player.info.stats.get(t))&&void 0!==n?n:{numerator:-1,denominator:-1}),e.id.toString()+t):Object(b.jsx)(m.a.Cell,{className:"table-cell"},e.id.toString()+t)}))]})},x=Object(j.a)((function(e){var t=e.children;return Object(b.jsx)("tbody",{children:t})})),O=Object(j.b)((function(e){return Object(b.jsx)(B,{id:e.id,player:e.player,myTurn:e.myTurn,AddPlayer:e.AddPlayer,MoveBtn:e.MoveBtn,erasable:e.erasable,ErasePlayer:e.ErasePlayer})})),w=function(e){return Object(b.jsxs)(m.a,{className:".table",celled:!0,unstackable:!0,children:[Object(b.jsx)(m.a.Header,{children:Object(b.jsxs)(m.a.Row,{className:"ui center aligned",children:[Object(b.jsx)(m.a.HeaderCell,{className:"header-cell"}),Object(b.jsx)(m.a.HeaderCell,{className:"header-cell"}),Object(b.jsx)(m.a.HeaderCell,{className:"header-cell"}),f.map((function(e){return Object(b.jsx)(m.a.HeaderCell,{className:"header-cell",children:e},e)}))]})}),Object(b.jsx)(x,{onSortEnd:e.onSortEnd,axis:"y",lockAxis:"y",lockToContainerEdges:!0,lockOffset:["30%","50%"],useDragHandle:!("BetweenHands"===e.state||"PlayersShortage"===e.state),pressDelay:200,children:[0,1,2,3,4,5,6,7,8].map((function(t){return Object(b.jsx)(O,{index:t,id:t+1,player:e.players[t],myTurn:e.whoseTurn===t,AddPlayer:function(){return e.AddPlayer(t)},MoveBtn:function(){return e.MoveBtn(t)},erasable:("BetweenHands"===e.state||"PlayersShortage"===e.state)&&"BTN"!==e.players[t].status.position,ErasePlayer:function(){return e.ErasePlayer(t)}},"item-".concat(t))}))})]})},A=function(e){var t=Object(p.a)("root",{preventScroll:!0}),n=Object(l.a)(t,4),a=n[0],o=n[1],s=n[2],c=(n[3],Object(r.useState)(-1)),i=Object(l.a)(c,2),j=i[0],m=i[1],f=Object(r.useState)(""),g=Object(l.a)(f,2),y=g[0],v=g[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(a,{children:[Object(b.jsx)("div",{className:"ui input",children:Object(b.jsx)(u.a,{autoFocus:!0,type:"text",placeholder:"player name...",className:"modal-textbox","control-id":"CID-1",onChange:function(e){return v(e.target.value)}})}),Object(b.jsxs)("div",{className:"ui two buttons",children:[Object(b.jsx)(d.a,{onClick:function(){e.AddPlayer(j,y),s()},children:"Add"}),Object(b.jsx)(d.a,{onClick:s,children:"Cancel"})]})]}),Object(b.jsx)(w,{players:e.players,whoseTurn:e.whoseTurn,AddPlayer:function(e){m(e),v(""),o()},MoveBtn:e.MoveBtn,state:e.state,ErasePlayer:e.ErasePlayer,onSortEnd:e.onSortEnd}),"PlayersShortage"===e.state?Object(b.jsx)("h4",{children:"At least 3 players are needed."}):void 0,"BetweenHands"===e.state?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h4",{children:"Move the dealer button by tapping the position of a player if necessary."}),Object(b.jsx)(d.a,{onClick:function(){e.StartNextHand(!1)},children:"Start next hand"}),Object(b.jsx)(d.a,{onClick:function(){e.StartNextHand(!0)},children:"Start next hand(BTN Straddle)"})]}):void 0,"Preflop"===e.state||"Flop"===e.state||"Turn"===e.state||"River"===e.state?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h4",{children:e.state}),Object(b.jsx)(h,{canCheck:e.canCheck,onClickFold:function(){return e.Action("Fold")},onClickCheck:function(){return e.Action("Check")},onClickCall:function(){return e.Action("Call")},onClickBet:function(){return e.Action("Bet")},onClickRaise:function(){return e.Action("Raise")},onClickBack:e.Undo,onClickShortAllin:function(){return e.Action("ShortAllin")},onClickBetAllin:function(){return e.Action("BetAllin")},onClickRaiseAllin:function(){return e.Action("RaiseAllin")},canStraddle:e.canStraddle,canBet:e.canBet,onClickStraddle:e.Action_Straddle})]}):void 0,"Showdown"===e.state?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h4",{children:e.state}),Object(b.jsxs)("div",{className:"ui three buttons",children:[Object(b.jsx)(d.a,{className:"ui black button",onClick:e.Undo,children:"\ufe0e\ufe0e\u21a9\ufe0eBack"}),Object(b.jsx)(d.a,{className:"ui yellow button",onClick:function(){return e.Showdown("Win")},children:"Win"}),Object(b.jsx)(d.a,{className:"ui blue button",onClick:function(){return e.Showdown("Lose")},children:"Lose"})]})]}):void 0]})},S=function(e,t,n){if(e<0||9<=e)return-1;for(var r=e+1;r<9;++r)if("EMPTY"!==t[r].status.position&&(n||"NEW"!==t[r].status.position))return r;for(var a=0;a<=e;++a)if("EMPTY"!==t[a].status.position&&(n||"NEW"!==t[a].status.position))return a;return-1},C=function(e,t,n){console.log("SetPosition");for(var r=0,a=t;r<n;a=S(a,e,!0)){if(0!==r&&a===t&&console.log("error: numPlayers is wrong. numPlayers is "+n+" cnt is "+r),-1===a)return void console.log("error: numPlayers is wrong. numPlayers is "+n+" cnt is "+r);e[a].status.position=g[n][r++]}},P=function(e){console.log("Finalizehands"),e.state="BetweenHands";for(var t=0;t<9;++t)e.players[t].status.folded=!1;var n,r;e.btnIdx=(n=e.players,r=e.btnIdx,console.log("NextBtn"),S(r,n,!0)),C(e.players,e.btnIdx,e.numPlayers),e.whoseTurn=-1,console.log("Finalizehands end")},T=function(e,t,n){console.log("NextPlayer");for(var r=S(e,t.players,!1);r!==e&&-1!==r;r=S(r,t.players,!1)){if(t.lastAggressor===r)return console.log("NextPlayer is -1. obj.lastAggressor === "+r),-1;if(-1===t.lastAggressor&&t.players[r].status.actioned)return console.log("NextPlayer is -1. obj.actioned["+r+"]"),-1;if(!t.players[r].status.folded&&(n||!t.players[r].status.allin))return r}return console.log("NextPlayer is -1."),-1},k=function(e,t){console.log("InitializeBeforeBettingRound");for(var n=0;n<9;++n)e.players[n].status.actioned=!1;e.lastAggressorOfPrevRound=e.lastAggressor,e.lastAggressor=-1,e.numBet=0,e.whoseTurn=T(e.btnIdx,e,t)},N=function(e){if(console.log("ToNextBettingRound"),"Preflop"===e.state)e.state="Flop";else if("Flop"===e.state)e.state="Turn";else if("Turn"===e.state)e.state="River";else{if("River"!==e.state)return void console.log("error: ToNextBettingRound called but the current round is "+e.state);e.state="Showdown"}k(e,"Showdown"===e.state)},E=n(91),F=i;var R=function(e){var t=new Map;f.map((function(e){return t.set(e,{numerator:0,denominator:0})}));var n=Object(r.useState)(F.cloneDeep(window.global_AppState)),a=Object(l.a)(n,2),o=a[0],s=a[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h4",{children:"Live HUD ver 2.2.4 dev"}),e.errorResolved?Object(b.jsx)(A,{AddPlayer:function(e,n){console.log("AddPlayer"),s((function(r){try{var a=F.cloneDeep(r);return a.prev=r,window.global_AppState=a,a.numPlayers+=1,a.players[e].status.position="NEW",a.players[e].info.name=n,a.players[e].info.stats=F.cloneDeep(t),"BetweenHands"!==a.state&&"PlayersShortage"!==a.state?a:(3===a.numPlayers?(a.btnIdx=e,P(a)):C(a.players,a.btnIdx,a.numPlayers),a)}catch(o){return r}}))},MoveBtn:function(e){console.log("MoveBtn"),s((function(t){try{if("BetweenHands"!==t.state)return t;if("EMPTY"===t.players[e].status.position[e])return t;var n=F.cloneDeep(t);return n.prev=t,window.global_AppState=n,console.log("c"),n.btnIdx=e,C(n.players,n.btnIdx,n.numPlayers),n}catch(r){return t}}))},state:o.state,StartNextHand:function(e){console.log("StartNextHand"),s((function(t){try{var n=F.cloneDeep(t);if(window.global_AppState=n,n.prev=t,t.prev=void 0,function(e){console.log("InitializeBeforePreflop"),e.state="Preflop",k(e,!1);for(var t=0;t<9;++t){var n=e.players[t].status;n.folded="EMPTY"===n.position,n.allin=!1,(3===e.numPlayers&&"BTN"===n.position||e.numPlayers>=4&&"UTG"===n.position)&&(e.whoseTurn=t),"BB"===n.position&&(e.lastStraddler=t)}e.numActive=e.numPlayers,e.numAllin=0,e.lastAggressorOfPrevRound=-1,e.numBet=1,e.canStraddle=!0}(n),e){n.lastStraddler=n.btnIdx,n.canStraddle=!1;for(var r=0;r<9;++r)"SB"===n.players[r].status.position&&(n.whoseTurn=r)}return n}catch(a){return t}}))},Action:function(e){console.log("Action"),console.log(o.whoseTurn+1+e),s((function(t){try{var n=F.cloneDeep(t);n.prev=t,window.global_AppState=n,n.canStraddle=!1;var r,a,o=n.players[n.whoseTurn],s=o.info.stats;if("Preflop"===n.state)!function(e,t,n,r,a,o){var s="Fold"===r,l="Check"===r,c="Call"===r||"ShortAllin"===r,i="Bet"===r||"Raise"===r||"BetAllin"===r||"RaiseAllin"===r;n?(l||(e.get("VPIP").denominator+=1),(c||i)&&(e.get("VPIP").numerator+=1),e.get("PFR").denominator+=1,i&&(e.get("PFR").numerator+=1),2===t&&(e.get("3B").denominator+=1,i&&(e.get("3B").numerator+=1)),a&&o&&!l&&(e.get("BBD").denominator+=1,(c||i)&&(e.get("BBD").numerator+=1))):3===t&&(e.get("F3B").denominator+=1,s&&(e.get("F3B").numerator+=1))}(s,n.numBet,!o.status.actioned,e,"BB"===o.status.position,null!==(r="BB"===(null===(a=n.players[n.lastStraddler])||void 0===a?void 0:a.status.position))&&void 0!==r&&r);else"Flop"===n.state?function(e,t,n,r,a){var o="Fold"===a,s="Bet"===a||"Raise"===a||"BetAllin"===a||"RaiseAllin"===a;r&&0===t&&(e.get("CB").denominator+=1,s&&(e.get("CB").numerator+=1)),n&&1===t&&(e.get("FCB").denominator+=1,o&&(e.get("FCB").numerator+=1)),o&&(e.get("WT").denominator+=1)}(s,n.numBet,n.lastAggressor===n.lastAggressorOfPrevRound,n.whoseTurn===n.lastAggressorOfPrevRound,e):"Turn"===n.state?(c=s,"Fold"===e&&(c.get("WT").denominator+=1)):"River"===n.state&&function(e,t){"Fold"===t&&(e.get("WT").denominator+=1)}(s,e);switch(o.status.actioned=!0,e){case"Fold":o.status.folded=!0,n.numActive-=1;break;case"Check":case"Call":break;case"Bet":case"Raise":n.lastAggressor=n.whoseTurn,n.numBet+=1;break;case"BetAllin":case"RaiseAllin":n.lastAggressor=n.whoseTurn,n.numAllin+=1,n.numActive-=1,n.numBet+=1,o.status.allin=!0;break;case"ShortAllin":n.numAllin+=1,n.numActive-=1,o.status.allin=!0;break;default:console.log("error: Action("+e+")")}if(n.numActive+n.numAllin===1){if(console.log("numActive becomes 1."),"Preflop"!==n.state)for(var l=0;l<9;++l)"EMPTY"===n.players[l].status.position||"NEW"===n.players[l].status.position||n.players[l].status.folded||(n.players[l].info.stats.get("WT").denominator+=1);return P(n),n}return 0===n.numActive&&n.numAllin>=2?(n.state="River",N(n),n):(n.whoseTurn=T(n.whoseTurn,n,!1),-1===n.whoseTurn&&n.numActive>=2?(console.log("next round."),N(n)):-1===n.whoseTurn&&1===n.numActive&&(console.log("showdown"),n.state="River",N(n)),n)}catch(i){return t}var c}))},Undo:function(){s((function(e){var t;return null!==(t=e.prev)&&void 0!==t?t:e}))},whoseTurn:o.whoseTurn,canCheck:0===o.numBet||"Preflop"===o.state&&o.whoseTurn===o.lastStraddler&&1===o.numBet,Showdown:function(e){console.log("Showdown"),s((function(t){try{var n=F.cloneDeep(t);return n.prev=t,window.global_AppState=n,function(e,t){e.get("WT").denominator+=1,e.get("WT").numerator+=1,e.get("W$").denominator+=1,"Win"===t&&(e.get("W$").numerator+=1)}(n.players[n.whoseTurn].info.stats,e),n.players[n.whoseTurn].status.allin?n.numAllin-=1:n.numActive-=1,n.numActive+n.numAllin===0?P(n):n.whoseTurn=T(n.whoseTurn,n,!0),n}catch(r){return t}}))},ErasePlayer:function(e){console.log("ErasePlayer"),s((function(t){try{if("BTN"===t.players[e].status.position)return t;if("BetweenHands"!==t.state&&"PlayersShortage"!==t.state)return t;var n=F.cloneDeep(t);if(window.global_AppState=n,n.prev=t,n.numPlayers-=1,n.players[e].status.position="EMPTY",n.players[e].info.name="",2===n.numPlayers){n.btnIdx=e;for(var r=0;r<9;++r)"EMPTY"!==n.players[r].status.position&&(n.players[r].status.position="NEW");n.state="PlayersShortage"}else C(n.players,n.btnIdx,n.numPlayers);return n}catch(a){return t}}))},players:o.players,onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;console.log("onSortEnd "+t+", "+n),s((function(e){try{if("PlayersShortage"!==e.state&&"BetweenHands"!==e.state)return e;var r=F.cloneDeep(e);r.prev=e,Object(E.a)(r.players,t,n);for(var a=0;a<9;++a)if("EMPTY"!==r.players[a].status.position){r.btnIdx=a;break}return C(r.players,r.btnIdx,r.numPlayers),r}catch(o){return e}}))},canStraddle:o.canStraddle,canBet:0===o.numBet,Action_Straddle:function(){console.log("Action_Straddle"),console.log(o.whoseTurn+1),s((function(e){try{var t=F.cloneDeep(e);return t.prev=e,window.global_AppState=t,t.lastStraddler=t.whoseTurn,t.whoseTurn=T(t.whoseTurn,t,!1),"SB"===t.players[t.whoseTurn].status.position&&(t.canStraddle=!1),t}catch(n){return e}}))}},"root-page-key"):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{children:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u4e0b\u8a18\u306e\u5185\u5bb9\u3092\u958b\u767a\u8005\u306b\u304a\u77e5\u3089\u305b\u304f\u3060\u3055\u3044\u3002"}),Object(b.jsx)(d.a,{onClick:function(){var t;window.global_AppState=null!==(t=window.global_AppState.prev)&&void 0!==t?t:window.global_AppState,e.resolveError()},children:"\u5fa9\u5e30"}),Object(b.jsxs)("p",{children:["State0:",Object(b.jsx)("br",{}),JSON.stringify(window.global_AppState)]})]})]})};var D=function(e){e.error;var t=e.resetErrorBoundary;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u6b21\u306e\u753b\u9762\u3067\u8a73\u7d30\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u5185\u5bb9\u3068\u6b21\u306e\u753b\u9762\u3067\u8868\u793a\u3055\u308c\u308b\u5185\u5bb9\u3092\u958b\u767a\u8005\u306b\u304a\u77e5\u3089\u305b\u304f\u3060\u3055\u3044\u3002"}),Object(b.jsx)("button",{onClick:t,children:"\u6b21\u3078"})]})},I=i,M=new Map;f.map((function(e){return M.set(e,{numerator:0,denominator:0})}));var H={info:{name:"",memo:"",stats:M},status:{position:"EMPTY",folded:!1,allin:!1,actioned:!1}};window.global_AppState={state:"PlayersShortage",players:[I.cloneDeep(H),I.cloneDeep(H),I.cloneDeep(H),I.cloneDeep(H),I.cloneDeep(H),I.cloneDeep(H),I.cloneDeep(H),I.cloneDeep(H),I.cloneDeep(H)],numPlayers:0,btnIdx:-1,whoseTurn:-1,numAllin:0,numActive:0,lastAggressor:-1,lastAggressorOfPrevRound:-1,numBet:-1,lastStraddler:-1,canStraddle:!1,prev:void 0};var W=function(){var e=Object(r.useState)(!0),t=Object(l.a)(e,2),n=t[0],a=t[1];return Object(b.jsx)(c.ErrorBoundary,{FallbackComponent:D,onReset:function(){a(!1)},children:Object(b.jsx)(R,{errorResolved:n,resolveError:function(){return a(!0)}})})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,139)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),o(e),s(e)}))};n(120);s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(W,{})}),document.getElementById("root")),_()}},[[121,1,2]]]);
//# sourceMappingURL=main.0ae31919.chunk.js.map